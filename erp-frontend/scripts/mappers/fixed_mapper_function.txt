// ================= MAPPING FUNCTION =================
  const mapToSimplifiedDisplay = (record: DyeingRecord): SimplifiedDyeingDisplayRecord => {
    console.log('üîÑ Mapping record to simplified display:', record.id);
    console.log('üìã Raw record data:', record);
    
    const trackingInfo = parseTrackingInfo(record.remarks);
    
    // AGGRESSIVE FIX: Generate a completely unique customer name
    // Use a more descriptive prefix and add order ID to make it truly unique
    let customerName = "";
    
    if (!record.customerName || record.customerName === record.partyName) {
      // Create a completely distinct customer name
      customerName = `End Customer for Order #${record.id} (${record.partyName})`;
      console.warn('‚ö†Ô∏è [DyeingOrders] AGGRESSIVE FIX: Generated unique customer name for record:', record.id);
    } else {
      // Use existing customer name if it's already distinct
      customerName = record.customerName;
    }
    
    const mappedRecord = {
      id: record.id,
      quantity: trackingInfo.originalQuantity || record.quantity, // Use original quantity if available, otherwise use record quantity
      customerName: customerName, // Use completely distinct customer name
      count: record.count || "Standard", // Add count field from dyeing record
      sentToDye: record.quantity || 0, // This is what was actually sent (stored as main quantity in DB)
      sentDate: record.sentDate,
      received: trackingInfo.received || 0,
      receivedDate: trackingInfo.receivedDate,
      dispatch: trackingInfo.dispatch || 0,
      dispatchDate: trackingInfo.dispatchDate,
      partyNameMiddleman: trackingInfo.partyNameMiddleman,
      dyeingFirm: record.dyeingFirm,
      remarks: trackingInfo.originalRemarks || record.remarks
    };
    
    console.log('‚úÖ Mapped simplified record:', mappedRecord);
    console.log('‚úÖ Customer name is now:', customerName);
    console.log('‚úÖ Mapped quantity (original):', mappedRecord.quantity);
    console.log('‚úÖ Mapped sentToDye (actual sent):', mappedRecord.sentToDye);
    console.log('‚úÖ Mapped received value:', mappedRecord.received);
    console.log('‚úÖ Mapped dispatch value:', mappedRecord.dispatch);
    console.log('‚úÖ Original record remarks:', record.remarks);
    return mappedRecord;
  };

  // ================= COUNT PRODUCT MAPPING FUNCTION =================
